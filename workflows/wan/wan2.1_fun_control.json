{"id":"e7533930-2792-43a9-b4b5-ded4617d8a43","revision":0,"last_node_id":81,"last_link_id":150,"nodes":[{"id":3,"type":"KSampler","pos":[1170,500],"size":[280,262],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":135},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":115},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":116},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":117},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[35]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"KSampler"},"widgets_values":[887940314022885,"randomize",20,6,"uni_pc","simple",1]},{"id":6,"type":"CLIPTextEncode","pos":[420,70],"size":[420,140],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":74},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[112]}],"title":"CLIP Text Encode (Positive Prompt)","properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"CLIPTextEncode"},"widgets_values":["a women sticking out her toungue while mkaing wierd faces,(clay style:1.1)"],"color":"#232","bgcolor":"#353"},{"id":7,"type":"CLIPTextEncode","pos":[420,260],"size":[420,130],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":75},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[113]}],"title":"CLIP Text Encode (Negative Prompt)","properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"CLIPTextEncode"},"widgets_values":["Ëâ≤Ë∞ÉËâ≥‰∏ΩÔºåËøáÊõùÔºåÈùôÊÄÅÔºåÁªÜËäÇÊ®°Á≥ä‰∏çÊ∏ÖÔºåÂ≠óÂπïÔºåÈ£éÊ†ºÔºå‰ΩúÂìÅÔºåÁîª‰ΩúÔºåÁîªÈù¢ÔºåÈùôÊ≠¢ÔºåÊï¥‰ΩìÂèëÁÅ∞ÔºåÊúÄÂ∑ÆË¥®ÈáèÔºå‰ΩéË¥®ÈáèÔºåJPEGÂéãÁº©ÊÆãÁïôÔºå‰∏ëÈôãÁöÑÔºåÊÆãÁº∫ÁöÑÔºåÂ§ö‰ΩôÁöÑÊâãÊåáÔºåÁîªÂæó‰∏çÂ•ΩÁöÑÊâãÈÉ®ÔºåÁîªÂæó‰∏çÂ•ΩÁöÑËÑ∏ÈÉ®ÔºåÁï∏ÂΩ¢ÁöÑÔºåÊØÅÂÆπÁöÑÔºåÂΩ¢ÊÄÅÁï∏ÂΩ¢ÁöÑËÇ¢‰ΩìÔºåÊâãÊåáËûçÂêàÔºåÈùôÊ≠¢‰∏çÂä®ÁöÑÁîªÈù¢ÔºåÊùÇ‰π±ÁöÑËÉåÊôØÔºå‰∏âÊù°ËÖøÔºåËÉåÊôØ‰∫∫ÂæàÂ§öÔºåÂÄíÁùÄËµ∞Ôºå‰∏çÂêàÁêÜÁöÑÂä®‰Ωú"],"color":"#323","bgcolor":"#535"},{"id":37,"type":"UNETLoader","pos":[30,70],"size":[346.7470703125,82],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"weight_dtype","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[146]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"UNETLoader","models":[{"name":"wan2.1_fun_control_1.3B_bf16.safetensors","url":"https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/resolve/main/split_files/diffusion_models/wan2.1_fun_control_1.3B_bf16.safetensors?download=true","directory":"diffusion_models"}]},"widgets_values":["wan2.1_fun_control_1.3B_bf16.safetensors","default"]},{"id":38,"type":"CLIPLoader","pos":[30,190],"size":[350,106],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":0,"links":[74,75]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"CLIPLoader","models":[{"name":"umt5_xxl_fp8_e4m3fn_scaled.safetensors","url":"https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/resolve/main/split_files/text_encoders/umt5_xxl_fp8_e4m3fn_scaled.safetensors?download=true","directory":"text_encoders"}]},"widgets_values":["umt5_xxl_fp8_e4m3fn_scaled.safetensors","wan","default"]},{"id":39,"type":"VAELoader","pos":[30,330],"size":[350,60],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[76,114]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"VAELoader","models":[{"name":"wan_2.1_vae.safetensors","url":"https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/resolve/main/split_files/vae/wan_2.1_vae.safetensors?download=true","directory":"vae"}]},"widgets_values":["wan_2.1_vae.safetensors"]},{"id":49,"type":"CLIPVisionLoader","pos":[30,500],"size":[340,60],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null}],"outputs":[{"localized_name":"CLIP_VISION","name":"CLIP_VISION","type":"CLIP_VISION","slot_index":0,"links":[94]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"CLIPVisionLoader","models":[{"name":"clip_vision_h.safetensors","url":"https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/resolve/main/split_files/clip_vision/clip_vision_h.safetensors?download=true","directory":"clip_vision"}]},"widgets_values":["clip_vision_h.safetensors"]},{"id":51,"type":"CLIPVisionEncode","pos":[440,660],"size":[253.60000610351562,78],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"clip_vision","name":"clip_vision","type":"CLIP_VISION","link":94},{"localized_name":"image","name":"image","type":"IMAGE","link":109},{"localized_name":"crop","name":"crop","type":"COMBO","widget":{"name":"crop"},"link":null}],"outputs":[{"localized_name":"CLIP_VISION_OUTPUT","name":"CLIP_VISION_OUTPUT","type":"CLIP_VISION_OUTPUT","slot_index":0,"links":[119]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"CLIPVisionEncode"},"widgets_values":["none"]},{"id":55,"type":"WanFunControlToVideo","pos":[880,500],"size":[250,230],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":112},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":113},{"localized_name":"vae","name":"vae","type":"VAE","link":114},{"localized_name":"clip_vision_output","name":"clip_vision_output","shape":7,"type":"CLIP_VISION_OUTPUT","link":119},{"localized_name":"start_image","name":"start_image","shape":7,"type":"IMAGE","link":118},{"localized_name":"control_video","name":"control_video","shape":7,"type":"IMAGE","link":142},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"length","name":"length","type":"INT","widget":{"name":"length"},"link":null},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[115]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[116]},{"localized_name":"latent","name":"latent","type":"LATENT","links":[117]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"WanFunControlToVideo"},"widgets_values":[960,544,77,1]},{"id":65,"type":"SkipLayerGuidanceDiT","pos":[890,80],"size":[230,180],"flags":{"collapsed":false},"order":7,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":146},{"localized_name":"double_layers","name":"double_layers","type":"STRING","widget":{"name":"double_layers"},"link":null},{"localized_name":"single_layers","name":"single_layers","type":"STRING","widget":{"name":"single_layers"},"link":null},{"localized_name":"scale","name":"scale","type":"FLOAT","widget":{"name":"scale"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null},{"localized_name":"rescaling_scale","name":"rescaling_scale","type":"FLOAT","widget":{"name":"rescaling_scale"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[132]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"SkipLayerGuidanceDiT","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65},"widgets_values":["9,10","9,10",3,0.01,0.8000000000000002,0]},{"id":66,"type":"CFGZeroStar","pos":[890,310],"size":[230,30],"flags":{"collapsed":false},"order":17,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":131}],"outputs":[{"localized_name":"patched_model","name":"patched_model","type":"MODEL","links":[135]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"CFGZeroStar","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65},"widgets_values":[]},{"id":67,"type":"ModelSamplingSD3","pos":[1200,80],"size":[240,60],"flags":{"collapsed":false},"order":12,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":132},{"localized_name":"shift","name":"shift","type":"FLOAT","widget":{"name":"shift"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[133]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"ModelSamplingSD3","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65},"widgets_values":[5.000000000000001]},{"id":68,"type":"UNetTemporalAttentionMultiply","pos":[1200,190],"size":[246.86484375,150],"flags":{"collapsed":false},"order":14,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":133},{"localized_name":"self_structural","name":"self_structural","type":"FLOAT","widget":{"name":"self_structural"},"link":null},{"localized_name":"self_temporal","name":"self_temporal","type":"FLOAT","widget":{"name":"self_temporal"},"link":null},{"localized_name":"cross_structural","name":"cross_structural","type":"FLOAT","widget":{"name":"cross_structural"},"link":null},{"localized_name":"cross_temporal","name":"cross_temporal","type":"FLOAT","widget":{"name":"cross_temporal"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[131]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"UNetTemporalAttentionMultiply","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65},"widgets_values":[1,1,1.2,1.3]},{"id":71,"type":"Canny","pos":[390,1040],"size":[315,82],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":150},{"localized_name":"low_threshold","name":"low_threshold","type":"FLOAT","widget":{"name":"low_threshold"},"link":null},{"localized_name":"high_threshold","name":"high_threshold","type":"FLOAT","widget":{"name":"high_threshold"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[142,143]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"Canny"},"widgets_values":[0.20000000000000004,0.5000000000000001]},{"id":74,"type":"PreviewImage","pos":[390,1170],"size":[360,258],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":143}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":8,"type":"VAEDecode","pos":[900,800],"size":[210,266],"flags":{"collapsed":true},"order":19,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":35},{"localized_name":"vae","name":"vae","type":"VAE","link":76}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[147]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":79,"type":"CreateVideo","pos":[1180,800],"size":[270,78],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":147},{"localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":null},{"localized_name":"fps","name":"fps","type":"FLOAT","widget":{"name":"fps"},"link":null}],"outputs":[{"localized_name":"VIDEO","name":"VIDEO","type":"VIDEO","links":[148]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"CreateVideo"},"widgets_values":[16]},{"id":78,"type":"SaveVideo","pos":[880,950],"size":[590,490],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"video","name":"video","type":"VIDEO","link":148},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null},{"localized_name":"codec","name":"codec","type":"COMBO","widget":{"name":"codec"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"SaveVideo"},"widgets_values":["video/ComfyUI","auto","auto"]},{"id":77,"type":"MarkdownNote","pos":[-400,30],"size":[400,440],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["[Tutorial](https://docs.comfy.org/tutorials/video/wan/fun-control)\n\n\n## Model links\n\n**text_encoders**\n\n- [umt5_xxl_fp8_e4m3fn_scaled.safetensors](https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/resolve/main/split_files/text_encoders/umt5_xxl_fp8_e4m3fn_scaled.safetensors?download=true)\n\n**clip_vision**\n\n- [clip_vision_h.safetensors](https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/resolve/main/split_files/clip_vision/clip_vision_h.safetensors?download=true)\n\n**diffusion_models**\n\n- [wan2.1_fun_control_1.3B_bf16.safetensors](https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/resolve/main/split_files/diffusion_models/wan2.1_fun_control_1.3B_bf16.safetensors?download=true)\n\n**vae**\n\n- [wan_2.1_vae.safetensors](https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/resolve/main/split_files/vae/wan_2.1_vae.safetensors?download=true)\n\n\nModel Storage Location\n\n```\nüìÇ ComfyUI/\n‚îú‚îÄ‚îÄ üìÇ models/\n‚îÇ   ‚îú‚îÄ‚îÄ üìÇ text_encoders/\n‚îÇ   ‚îÇ      ‚îî‚îÄ‚îÄ umt5_xxl_fp8_e4m3fn_scaled.safetensors\n‚îÇ   ‚îú‚îÄ‚îÄ üìÇ clip_vision/\n‚îÇ   ‚îÇ      ‚îî‚îÄ‚îÄ clip_vision_h.safetensors\n‚îÇ   ‚îú‚îÄ‚îÄ üìÇ diffusion_models/\n‚îÇ   ‚îÇ      ‚îî‚îÄ‚îÄ wan2.1_fun_control_1.3B_bf16.safetensors\n‚îÇ   ‚îî‚îÄ‚îÄ üìÇ vae/\n‚îÇ          ‚îî‚îÄ‚îÄ wan_2.1_vae.safetensors\n```\n"],"color":"#432","bgcolor":"#000"},{"id":52,"type":"LoadImage","pos":[30,600],"size":[340,326],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[109,118]},{"localized_name":"MASK","name":"MASK","type":"MASK","slot_index":1,"links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"LoadImage"},"widgets_values":["wan2.1_fun_control_start_frame.png","image"]},{"id":80,"type":"LoadVideo","pos":[40,1060],"size":[274.080078125,228.2076923076923],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"file","name":"file","type":"COMBO","widget":{"name":"file"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"VIDEO","name":"VIDEO","type":"VIDEO","links":[149]}],"properties":{"cnr_id":"comfy-core","ver":"0.7.0","Node name for S&R":"LoadVideo"},"widgets_values":["wan2.1_fun_control_control_video.mp4","image"]},{"id":81,"type":"GetVideoComponents","pos":[120,1350],"size":[193.530859375,66],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"video","name":"video","type":"VIDEO","link":149}],"outputs":[{"localized_name":"images","name":"images","type":"IMAGE","links":[150]},{"localized_name":"audio","name":"audio","type":"AUDIO","links":null},{"localized_name":"fps","name":"fps","type":"FLOAT","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.7.0","Node name for S&R":"GetVideoComponents"},"widgets_values":[]}],"links":[[35,3,0,8,0,"LATENT"],[74,38,0,6,0,"CLIP"],[75,38,0,7,0,"CLIP"],[76,39,0,8,1,"VAE"],[94,49,0,51,0,"CLIP_VISION"],[109,52,0,51,1,"IMAGE"],[112,6,0,55,0,"CONDITIONING"],[113,7,0,55,1,"CONDITIONING"],[114,39,0,55,2,"VAE"],[115,55,0,3,1,"CONDITIONING"],[116,55,1,3,2,"CONDITIONING"],[117,55,2,3,3,"LATENT"],[118,52,0,55,4,"IMAGE"],[119,51,0,55,3,"CLIP_VISION_OUTPUT"],[131,68,0,66,0,"MODEL"],[132,65,0,67,0,"MODEL"],[133,67,0,68,0,"MODEL"],[135,66,0,3,0,"MODEL"],[142,71,0,55,5,"IMAGE"],[143,71,0,74,0,"IMAGE"],[146,37,0,65,0,"MODEL"],[147,8,0,79,0,"IMAGE"],[148,79,0,78,0,"VIDEO"],[149,80,0,81,0,"VIDEO"],[150,81,0,71,0,"IMAGE"]],"groups":[{"id":1,"title":"Load Models","bounding":[20,0,370,410],"color":"#3f789e","font_size":24,"flags":{}},{"id":2,"title":"Start Frame & CLIP Vision","bounding":[20,430,830,510],"color":"#3f789e","font_size":24,"flags":{}},{"id":5,"title":"Attention Booster","bounding":[870,0,600,410],"color":"#3f789e","font_size":24,"flags":{}},{"id":6,"title":"Prompt","bounding":[410,0,440,410],"color":"#3f789e","font_size":24,"flags":{}},{"id":7,"title":"Video and Preprocessor","bounding":[20,960,830,480],"color":"#3f789e","font_size":24,"flags":{}},{"id":8,"title":"Sampling & Decode","bounding":[870,430,600,470],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.6472322799849616,"offset":[638.0969652391791,-348.1091678973465]},"frontendVersion":"1.29.2","workflowRendererVersion":"LG","VHS_latentpreview":false,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true},"version":0.4}